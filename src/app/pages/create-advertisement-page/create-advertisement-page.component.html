<app-header [user]="user" (logout)="onLogout()"></app-header>
<div class="container">
  <form [formGroup]="advertisementForm" (ngSubmit)="submitForm()" class="form">
    <div class="form__advertisementTitle">New advertisement</div>
    <div class="form__wrap">
      <!--      title -->
      <div class="form__item">
        <div class="form__field">
          <div class="form__title">Title</div>
          <mat-form-field class="form__input">
            <mat-label>Enter a title</mat-label>
            <input
              type="text"
              maxlength="40"
              matInput
              placeholder="Enter a title"
              formControlName="title"
            />
          </mat-form-field>
          <div class="form__helper-text">No more 40 characters</div>
        </div>
      </div>
      <!--      location-->
      <div class="form__item">
        <div class="form__field">
          <div class="form__title">Location</div>
          <div class="form__input-wrap">
            <mat-form-field class="form__input several">
              <mat-select formControlName="country">
                <mat-option
                  *ngFor="let country of countries"
                  [value]="country.value"
                >
                  {{ country.viewValue }}
                </mat-option>
              </mat-select>
            </mat-form-field>
            <mat-form-field class="form__input several">
              <mat-label>Select a region</mat-label>
              <mat-select formControlName="location">
                <mat-option
                  *ngFor="let location of locations"
                  [value]="location.value"
                >
                  {{ location.viewValue }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>
      </div>
      <!--      category-->
      <div class="form__item">
        <div class="form__field">
          <div class="form__title">Category</div>
          <mat-form-field class="form__input several">
            <mat-label>Select a category</mat-label>
            <mat-select formControlName="category">
              <mat-option
                *ngFor="let category of categories"
                [value]="category.value"
              >
                {{ category.viewValue }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </div>
      <!--      quantity and unit-->
      <div class="form__item">
        <div class="form__field">
          <div class="form__title">Quantity</div>
          <div class="form__input-wrap">
            <mat-form-field class="form__input several">
              <mat-label>Enter the quantity</mat-label>
              <input
                type="text"
                maxlength="40"
                matInput
                placeholder="Enter the quantity"
                formControlName="quantity"
              />
            </mat-form-field>
            <mat-form-field class="form__input select-small">
              <mat-select
                class="form__select-small-text"
                formControlName="unit"
              >
                <mat-option *ngFor="let unit of units" [value]="unit.value">
                  {{ unit.viewValue }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>
      </div>
      <!--      price and currency -->
      <div class="form__item">
        <div class="form__field">
          <div class="form__title">Price</div>
          <div class="form__input-wrap">
            <mat-form-field class="form__input several">
              <mat-label>Enter the price</mat-label>
              <input
                type="text"
                maxlength="40"
                matInput
                placeholder="Enter the price"
                formControlName="price"
              />
            </mat-form-field>
            <mat-form-field class="form__input select-small">
              <mat-select
                class="form__select-small-text"
                formControlName="currency"
              >
                <mat-option *ngFor="let currency of currencies" [value]="currency.value">
                  {{ currency.viewValue }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>
      </div>
      <!--      drag and drop file-->
      <div class="form__item">
        <div class="form__field">
          <div class="form__title">Product images</div>
          <div class="form__dropzone" ngx-dropzone (change)="onSelect($event)">
            <ngx-dropzone-label>
              <div class="form__dropzone-wrap">
                <div>
                  <span class="form__dropzone-file-text">Choose a file</span>
                  <span class="form__dropzone-drop-text">
                    or drag and drop it here!</span
                  >
                </div>
                <div class="form__dropzone-footnote">
                  Acceptable formats: jpeg, png. Maximum size: 10 MB.
                </div>
              </div>
            </ngx-dropzone-label>
            <ngx-dropzone-image-preview
              ngProjectAs="ngx-dropzone-preview"
              *ngFor="let f of files"
              [file]="f"
              [removable]="true"
              (removed)="onRemove(f)"
            >
            </ngx-dropzone-image-preview>
          </div>
        </div>
        <div class="form__desc">
          <img src="assets/question.svg"
               class="form__desc-image"
               matTooltip="Pictures work much better than the most talented text. The more photos, the better."
               matTooltipPosition="right"
               matTooltipHideDelay="100"
               alt="question"/>
        </div>
      </div>
    </div>
    <!--    button-->
    <div class="form__btns">
      <div class="form__btns-wrap">
        <button mat-button [disabled]="advertisementForm.invalid" type="submit">
          Place an advertisement
        </button>
      </div>
      <p class="form__footnote">
        This ad will be placed on the site after review by a moderator and will
        be valid for the next 30 days.
      </p>
    </div>
  </form>
</div>
